<!--

Google Gmail API docs: https://developers.google.com/workspace/gmail/api/guides
https://developers.google.com/workspace/gmail/api/reference/rest
Google Cloud Console: https://console.cloud.google.com

Intrucciones:

1. Crear proyecto en Google Cloud Console.
2. Agregar credenciales (CLIENT_ID, API_KEY, CALLBACK)
2.1. OAuth 2.0 & Client IDs and callback URL
2.2. API Key
3. Activar servicios y APIs a usar (Gmail API)
4. Publicar proyecto (Project -> Audience -> Publish status -> Testing -> Publish app)
5. Agregar credenciales en el c贸digo (Client Id, API key, callback URL)

Caracteristicas:

1. Obtener mensajes. (hecho)
2. Obtener titulo del mensaje (hecho).
3. Obtener fecha recibida del mensaje (hecho).
3.1 Optimizar peticiones para obtener los nombres (hecho).
4. Paginaci贸n.
5. Mantener sesi贸n activa. (hecho)
6. Renovar sesi贸n.
7. Implementar variables de entorno. (hecho)

-->
<!DOCTYPE html>
<html>

<head>
    <title>Gmail API Quickstart</title>
    <meta charset="utf-8" />
</head>

<body>
    <p>Gmail API Quickstart</p>

    <!--Add buttons to initiate auth sequence and sign out-->
    <button id="authorize_button" onclick="handleAuthClick()">Authorize</button>
    <button id="signout_button" onclick="handleSignoutClick()">Sign Out</button>

    <pre id="content" style="white-space: pre-wrap;"></pre>

    <!--script src="https://apis.google.com/js/client:plusone.js" type="application/javascript"></script-->
    <script type="text/javascript">

        function loadScriptSync(src, callback) {
            var script = document.createElement('script');
            script.src = src;
            script.type = "text/javascript";
            script.async = true;
            script.defer = true;
            script.onload = callback;
            document.getElementsByTagName('body')[0].appendChild(script);
        }

        async function loadEnvironment() {
            const response = await fetch("./environment.json");
            return await response.json();
        }

        // Load environment variables and logic synchronously
        loadEnvironment().then((environment) => {
            window.environment = environment;
            loadScriptSync("index.js", function () {
                loadScriptSync("https://apis.google.com/js/api.js", window.loadGoogleAPI);
                loadScriptSync("https://accounts.google.com/gsi/client", window.loadGoogleTokenClient);
            });

        });

    </script>
</body>

</html>